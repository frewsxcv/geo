<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Simplifies a geometry, attempting to preserve its topology by removing self-intersections"><title>SimplifyVwPreserve in geo::algorithm::simplify_vw - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="geo" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../geo/index.html"><img src="https://raw.githubusercontent.com/georust/meta/master/logo/logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../geo/index.html"><img src="https://raw.githubusercontent.com/georust/meta/master/logo/logo.png" alt="logo"></a><h2><a href="../../../geo/index.html">geo</a><span class="version">0.30.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Simplify<wbr>VwPreserve</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.simplify_vw_preserve" title="simplify_vw_preserve">simplify_vw_preserve</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In geo::<wbr>algorithm::<wbr>simplify_<wbr>vw</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">geo</a>::<wbr><a href="../index.html">algorithm</a>::<wbr><a href="index.html">simplify_vw</a></div><h1>Trait <span class="trait">SimplifyVwPreserve</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/geo/algorithm/simplify_vw.rs.html#530-590">Source</a> </span></div><pre class="rust item-decl"><code>pub trait SimplifyVwPreserve&lt;T, Epsilon = T&gt; {
    // Required method
    fn <a href="#tymethod.simplify_vw_preserve" class="fn">simplify_vw_preserve</a>(&amp;self, epsilon: T) -&gt; Self
       <span class="where">where T: <a class="trait" href="../../trait.CoordFloat.html" title="trait geo::CoordFloat">CoordFloat</a> + <a class="trait" href="../../../rstar/point/trait.RTreeNum.html" title="trait rstar::point::RTreeNum">RTreeNum</a></span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Simplifies a geometry, attempting to preserve its topology by removing self-intersections</p>
<p>A larger <code>epsilon</code> means being more aggressive about removing points with less concern for
maintaining the existing shape. Specifically, when you consider whether to remove a point, you
can draw a triangle consisting of the candidate point and the points before and after it.
If the area of this triangle is less than <code>epsilon</code>, we will remove the point.</p>
<p>An <code>epsilon</code> less than or equal to zero will return an unaltered version of the geometry.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.simplify_vw_preserve" class="method"><a class="src rightside" href="../../../src/geo/algorithm/simplify_vw.rs.html#587-589">Source</a><h4 class="code-header">fn <a href="#tymethod.simplify_vw_preserve" class="fn">simplify_vw_preserve</a>(&amp;self, epsilon: T) -&gt; Self<div class="where">where
    T: <a class="trait" href="../../trait.CoordFloat.html" title="trait geo::CoordFloat">CoordFloat</a> + <a class="trait" href="../../../rstar/point/trait.RTreeNum.html" title="trait rstar::point::RTreeNum">RTreeNum</a>,</div></h4></section></summary><div class="docblock"><p>Returns the simplified representation of a geometry, using a topology-preserving variant of the
<a href="http://www.tandfonline.com/doi/abs/10.1179/000870493786962263">Visvalingam-Whyatt</a> algorithm.</p>
<p>See <a href="https://www.jasondavies.com/simplify/">here</a> for a graphical explanation.</p>
<p>The topology-preserving algorithm uses an <a href="../../../rstar/struct.RTree.html">R* tree</a> to
efficiently find candidate line segments which are tested for intersection with a given triangle.
If intersections are found, the previous point (i.e. the left component of the current triangle)
is also removed, altering the geometry and removing the intersection.</p>
<p>In the example below, <code>(135.0, 68.0)</code> would be retained by the standard algorithm,
forming triangle <code>(0, 1, 3),</code> which intersects with the segments <code>(280.0, 19.0), (117.0, 48.0)</code> and <code>(117.0, 48.0), (300,0, 40.0)</code>. By removing it,
a new triangle with indices <code>(0, 3, 4)</code> is formed, which does not cause a self-intersection.</p>
<h5 id="notes"><a class="doc-anchor" href="#notes">§</a>Notes</h5>
<ul>
<li>It is possible for the simplification algorithm to displace a Polygon’s interior ring outside its shell.</li>
<li>The algorithm does <strong>not</strong> guarantee a valid output geometry, especially on smaller geometries.</li>
<li>If removal of a point causes a self-intersection, but the geometry only has <code>n + 1</code>
points remaining (3 for a <code>LineString</code>, 5 for a <code>Polygon</code>), the point is retained and the
simplification process ends. This is because there is no guarantee that removal of two points will remove
the intersection, but removal of further points would leave too few points to form a valid geometry.</li>
<li>The tolerance used to remove a point is <code>epsilon</code>, in keeping with GEOS. JTS uses <code>epsilon ^ 2</code></li>
</ul>
<h5 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>approx::assert_relative_eq;
<span class="kw">use </span>geo::SimplifyVwPreserve;
<span class="kw">use </span>geo::line_string;

<span class="kw">let </span>line_string = <span class="macro">line_string!</span>[
    (x: <span class="number">10.</span>, y: <span class="number">60.</span>),
    (x: <span class="number">135.</span>, y: <span class="number">68.</span>),
    (x: <span class="number">94.</span>, y: <span class="number">48.</span>),
    (x: <span class="number">126.</span>, y: <span class="number">31.</span>),
    (x: <span class="number">280.</span>, y: <span class="number">19.</span>),
    (x: <span class="number">117.</span>, y: <span class="number">48.</span>),
    (x: <span class="number">300.</span>, y: <span class="number">40.</span>),
    (x: <span class="number">301.</span>, y: <span class="number">10.</span>),
];

<span class="kw">let </span>simplified = line_string.simplify_vw_preserve(<span class="number">668.6</span>);

<span class="kw">let </span>expected = <span class="macro">line_string!</span>[
    (x: <span class="number">10.</span>, y: <span class="number">60.</span>),
    (x: <span class="number">126.</span>, y: <span class="number">31.</span>),
    (x: <span class="number">280.</span>, y: <span class="number">19.</span>),
    (x: <span class="number">117.</span>, y: <span class="number">48.</span>),
    (x: <span class="number">300.</span>, y: <span class="number">40.</span>),
    (x: <span class="number">301.</span>, y: <span class="number">10.</span>),
];

<span class="macro">assert_relative_eq!</span>(expected, simplified, epsilon = <span class="number">1e-6</span>);</code></pre></div>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.86.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-SimplifyVwPreserve%3CT%3E-for-LineString%3CT%3E" class="impl"><a class="src rightside" href="../../../src/geo/algorithm/simplify_vw.rs.html#592-600">Source</a><a href="#impl-SimplifyVwPreserve%3CT%3E-for-LineString%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="trait.SimplifyVwPreserve.html" title="trait geo::algorithm::simplify_vw::SimplifyVwPreserve">SimplifyVwPreserve</a>&lt;T&gt; for <a class="struct" href="../../geometry/struct.LineString.html" title="struct geo::geometry::LineString">LineString</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="../../trait.GeoFloat.html" title="trait geo::GeoFloat">GeoFloat</a> + <a class="trait" href="../../../rstar/point/trait.RTreeNum.html" title="trait rstar::point::RTreeNum">RTreeNum</a>,</div></h3></section><section id="impl-SimplifyVwPreserve%3CT%3E-for-MultiLineString%3CT%3E" class="impl"><a class="src rightside" href="../../../src/geo/algorithm/simplify_vw.rs.html#602-614">Source</a><a href="#impl-SimplifyVwPreserve%3CT%3E-for-MultiLineString%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="trait.SimplifyVwPreserve.html" title="trait geo::algorithm::simplify_vw::SimplifyVwPreserve">SimplifyVwPreserve</a>&lt;T&gt; for <a class="struct" href="../../geometry/struct.MultiLineString.html" title="struct geo::geometry::MultiLineString">MultiLineString</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="../../trait.GeoFloat.html" title="trait geo::GeoFloat">GeoFloat</a> + <a class="trait" href="../../../rstar/point/trait.RTreeNum.html" title="trait rstar::point::RTreeNum">RTreeNum</a>,</div></h3></section><section id="impl-SimplifyVwPreserve%3CT%3E-for-MultiPolygon%3CT%3E" class="impl"><a class="src rightside" href="../../../src/geo/algorithm/simplify_vw.rs.html#630-642">Source</a><a href="#impl-SimplifyVwPreserve%3CT%3E-for-MultiPolygon%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="trait.SimplifyVwPreserve.html" title="trait geo::algorithm::simplify_vw::SimplifyVwPreserve">SimplifyVwPreserve</a>&lt;T&gt; for <a class="struct" href="../../geometry/struct.MultiPolygon.html" title="struct geo::geometry::MultiPolygon">MultiPolygon</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="../../trait.GeoFloat.html" title="trait geo::GeoFloat">GeoFloat</a> + <a class="trait" href="../../../rstar/point/trait.RTreeNum.html" title="trait rstar::point::RTreeNum">RTreeNum</a>,</div></h3></section><section id="impl-SimplifyVwPreserve%3CT%3E-for-Polygon%3CT%3E" class="impl"><a class="src rightside" href="../../../src/geo/algorithm/simplify_vw.rs.html#616-628">Source</a><a href="#impl-SimplifyVwPreserve%3CT%3E-for-Polygon%3CT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="trait.SimplifyVwPreserve.html" title="trait geo::algorithm::simplify_vw::SimplifyVwPreserve">SimplifyVwPreserve</a>&lt;T&gt; for <a class="struct" href="../../geometry/struct.Polygon.html" title="struct geo::geometry::Polygon">Polygon</a>&lt;T&gt;<div class="where">where
    T: <a class="trait" href="../../trait.GeoFloat.html" title="trait geo::GeoFloat">GeoFloat</a> + <a class="trait" href="../../../rstar/point/trait.RTreeNum.html" title="trait rstar::point::RTreeNum">RTreeNum</a>,</div></h3></section></div><script src="../../../trait.impl/geo/algorithm/simplify_vw/trait.SimplifyVwPreserve.js" data-ignore-extern-crates="geo_types" async></script></section></div></main></body></html>